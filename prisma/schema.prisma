generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  schemas  = ["dados_nominais_datalake", "indicadores_cuidado_mockups"]
}

model DiabetesAcfItem {
  municipalitySusId                        String    @db.VarChar(6) @map("municipio_id_sus")
  municipalityName                         String    @map("municipio_nome")
  patientId                                String    @map("cidadao_ip_id")
  patientName                              String    @map("cidadao_nome")
  patientCpf                               String?   @db.VarChar(14) @map("cidadao_cpf")
  patientCns                               String?   @db.VarChar(32) @map("cidadao_cns")
  patientAge                               Int       @map("cidadao_idade")
  patientAgeRange                          Int       @map("cidadao_faixa_etaria")
  patientPhoneNumber                       String?   @map("cidadao_telefone")
  careTeamIne                              String?   @map("equipe_ine")
  careTeamName                             String?   @map("equipe_nome")
  microAreaName                            String?   @map("micro_area")
  latestAppointmentDate                    DateTime? @db.Date @map("data_ultima_consulta_diabetes")
  appointmentStatusByQuarter               Int       @db.SmallInt @map("situacao_quadrimestre_consulta_diabetes")
  latestBloodPressureExamRequestDate       DateTime? @db.Date @map("data_ultima_afericao_pa")
  bloodPressureExamStatusByQuarter         Int       @db.SmallInt @map("situacao_quadrimestre_afericao_pa")
	goodPracticesSum                         Int       @db.SmallInt @map("soma_boas_praticas")
	latestHomeVisitDate                      DateTime? @db.Date @map("data_ultima_visita_domiciliar")
	homeVisitStatusByQuarter                 Int       @db.SmallInt @map("situacao_quadrimestre_visita_domiciliar")
	latestWeightHeightDate                   DateTime? @db.Date @map("data_ultimo_peso_altura")
	weightHeightStatusByQuarter              Int       @db.SmallInt @map("situacao_quadrimestre_peso_altura")
  goodPracticesStatusByQuarter             Int       @db.SmallInt @map("situacao_quadrimestre_boas_praticas")
	isMedicalRecordUpdated                   Boolean   @map("st_cadastro_atualizado")
  latestGlycatedHemoglobinExamRequestDate  DateTime? @db.Date @map("data_ultima_hemoglobina_glicada")
  glycatedHemoglobinExamStatusByQuarter    Int       @db.SmallInt @map("situacao_quadrimestre_hemoglobina_glicada")
  latestFeetExamRequestDate                DateTime? @db.Date @map("data_ultima_avaliacao_pes")
  feetExamStatusByQuarter                  Int       @db.SmallInt @map("situacao_quadrimestre_avaliacao_pes")

  @@id([patientId, municipalitySusId], map: "lista_nominal_diabetes_pkey")
  @@schema("dados_nominais_datalake")
  @@map("lista_nominal_diabetes")
}

model dados_agregados_area_logada {
  municipio_id_sus    String    @db.Char(6)
  equipe_ine          String
  indicador           String
  parametro_descricao String
  parametro_valor     Int
  atualizacao_data    DateTime? @db.Timestamp(6)

  @@id([municipio_id_sus, equipe_ine, indicador, parametro_descricao], map: "dados_agregados_area_logada_pk")
  @@schema("dados_nominais_datalake")
}
// TODO: alterar nome dos campos de aferição de PA para padronizar com DiabetesAcfItem
model HypertensionAcfItem {
  municipalitySusId                  String    @db.VarChar(6) @map("municipio_id_sus")
  municipalityName                   String    @map("municipio_nome")
  patientId                          String    @map("cidadao_ip_id")
  patientName                        String    @map("cidadao_nome")
  patientCpf                         String?   @db.VarChar(14) @map("cidadao_cpf")
  patientCns                         String?   @db.VarChar(32) @map("cidadao_cns")
  patientAge                         Int       @map("cidadao_idade")
  patientAgeRange                    Int       @map("cidadao_faixa_etaria")
  patientPhoneNumber                 String?   @map("cidadao_telefone")
  careTeamIne                        String?   @map("equipe_ine")
  careTeamName                       String?   @map("equipe_nome")
  microAreaName                      String?   @map("micro_area")
  latestAppointmentDate              DateTime? @db.Date @map("data_ultima_consulta_hipertensao")
  appointmentStatusByQuarter         Int      @db.SmallInt @map("situacao_quadrimestre_consulta_hipertensao")
  latestExamRequestDate              DateTime? @db.Date @map("data_ultima_afericao_pa")
  latestExamRequestStatusByQuarter   Int      @db.SmallInt @map("situacao_quadrimestre_afericao_pa")
	goodPracticesSum                   Int       @db.SmallInt @map("soma_boas_praticas")
	latestHomeVisitDate                DateTime? @db.Date @map("data_ultima_visita_domiciliar")
	homeVisitStatusByQuarter           Int      @db.SmallInt @map("situacao_quadrimestre_visita_domiciliar")
	latestWeightHeightDate             DateTime? @db.Date @map("data_ultimo_peso_altura")
	weightHeightStatusByQuarter        Int      @db.SmallInt @map("situacao_quadrimestre_peso_altura")
  goodPracticesStatusByQuarter       Int       @db.SmallInt @map("situacao_quadrimestre_boas_praticas")
	isMedicalRecordUpdated             Boolean   @map("st_cadastro_atualizado")

  @@id([patientId, municipalitySusId], map: "lista_nominal_hipertensao_pkey")
  @@schema("dados_nominais_datalake")
  @@map("lista_nominal_hipertensao")
}